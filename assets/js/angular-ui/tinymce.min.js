/*! ProjectAlpha 14-04-2014 */
angular.module("ui.tinymce",[]).value("uiTinymceConfig",{}).directive("uiTinymce",["uiTinymceConfig",function(a){a=a||{};var b=0;return{require:"ngModel",link:function(c,d,e,f){var g,h,i,j=function(){f.$setViewValue(d.val()),c.$$phase||c.$apply()};e.id||e.$set("id","uiTinymce"+b++),g=e.uiTinymce?c.$eval(e.uiTinymce):{},h={setup:function(a){a.on("init",function(){f.$render()}),a.on("ExecCommand",function(){a.save(),j()}),a.on("KeyUp",function(){a.save(),j()}),a.on("SetContent",function(b){b.initial||(a.save(),j())}),g.setup&&(c.$eval(g.setup),delete g.setup)},mode:"exact",elements:e.id},angular.extend(h,a,g),setTimeout(function(){tinymce.init(h)}),f.$render=function(){i||(i=tinymce.get(e.id)),i&&i.setContent(f.$viewValue||"")}}}}]);