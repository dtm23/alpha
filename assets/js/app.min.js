/*! ProjectAlpha 24-04-2014 */
var app=angular.module("alpha",["ngRoute","ngResource","ngCookies","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/",{controller:"WelcomeCtrl",templateUrl:"partials/public/welcome.html"}).when("/register",{controller:"RegistrationCtrl",templateUrl:"partials/public/register.html"}).when("/auth/login",{controller:"LoginCtrl",templateUrl:"partials/auth/login.html"}).when("/auth/logout",{controller:"LogoutCtrl",templateUrl:"partials/auth/logout.html"}).when("/dashboard",{controller:"DashboardCtrl",templateUrl:"partials/under-construction.html"}).when("/not-found",{templateUrl:"partials/404.html"}).otherwise({redirectTo:"/not-found"})}]);app.controller("LoginCtrl",["$scope","$location","AuthenticationService",function(a,b,c){a.clear=function(){a.error=!1},a.submit=function(d){c.login("/api/auth/login",d,function(c){a.$emit("_accountChange",c),b.path("/dashboard")},function(b){a.error=b})}}]),app.controller("LogoutCtrl",["$scope","$location","AuthenticationService",function(a,b,c){c.logout("/api/auth/logout",function(){a.$emit("_accountChange"),b.path("/")},function(){b.path("/dashboard")})}]),app.factory("AuthenticationService",["$http",function(a){var b=function(b,c,d,e){function f(){return a({method:"POST",url:b,data:c}).success(d).error(e)}return f()},c=function(b,c,d){function e(){return a({method:"POST",url:b}).success(c).error(d)}return e()};return{login:b,logout:c}}]),app.controller("DashboardCtrl",["$scope",function(){}]),app.controller("LayoutCtrl",["$scope",function(a){a.$on("_accountChange",function(b,c){c&&c.username?(c.displayName=c.forename&&c.surname?c.forename+" "+c.surname:c.forename?c.forename:c.username,a.account=c,a.header="partials/navigation-authenticated.html"):(delete a.account,a.header="partials/navigation-default.html")}),a.header="partials/navigation-default.html",a.footer="partials/footer.html"}]),app.controller("RegistrationCtrl",["$scope","$resource",function(a,b){var c=b("/api/register");a.clear=function(){a.error=!1},a.validatePassword=function(a){a.password.$modelValue&&a.password.$modelValue.length<6?a.password.$setValidity("length",!1):a.password.$setValidity("length",!0),a.password.$modelValue!=a.repeat.$modelValue?a.repeat.$setValidity("match",!1):a.repeat.$setValidity("match",!0)},a.submit=function(b){c.save(b,function(){a.success=!0},function(b){a.error=b.data})}}]),app.controller("WelcomeCtrl",["$scope","$interval",function(a,b){a.currentTime=new Date,b(function(){a.currentTime=new Date},1e3)}]);